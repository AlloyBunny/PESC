import sys
import os
import re
project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
sys.path.append(project_root)
import json
import time
import argparse
from tqdm import tqdm
from inference.llm_calls import call_llm
from individual_memory.memory_query import query_memories
from checklist.prompt import criteria_prompt_template
from utils.get_character_id import get_character_id_range
from utils.tools import history_to_text, cal_hash


def extract_json(output_str: str) -> str:
    """
    从AI输出文本中提取包裹在 ```json ``` 标记内的JSON字符串
    :param ai_output: AI的完整输出文本（包含 ```json ``` 标记）
    :return: 提取出的纯JSON字符串；若未找到标记则返回空字符串
    """
    # 正则表达式匹配 ```json 开头、``` 结尾的内容（忽略开头标记的换行和空格）
    json_pattern = r'```json\s*(.*?)\s*```'
    match = re.search(json_pattern, output_str, re.DOTALL)  # re.DOTALL 让 . 匹配换行符
    if match:
        return match.group(1)  # 返回捕获组中的JSON内容
    else:
        return ""

def get_system_instruction(item):
    L3_memory = item["L3_memory"]
    L2_memory = item["L2_memory"]
    L1_memory = item["L1_memory"]
    system_instruction = ("你是一个智能聊天伙伴，你擅长根据用户的性格和偏好，高情商地和用户聊天，让用户感到舒适、愉快或得到需要的帮助。"
        "你需要参考以下的个性化记忆来调整你的回答，以更好地满足用户的需求。\n"
        "<顶层记忆>\n"
        "{L3_memory}\n"
        "</顶层记忆>\n"
        "<多会话记忆>\n"
        "{L2_memory}\n"
        "</多会话记忆>\n"
        "<会话级记忆>\n"
        "{L1_memory}\n"
        "</会话级记忆>"
    )
    system_instruction = system_instruction.format(L3_memory=L3_memory, L2_memory=L2_memory, L1_memory=L1_memory)
    return system_instruction

parser = argparse.ArgumentParser()
parser.add_argument("--input_file", type=str, default="dataset/val.jsonl")
parser.add_argument("--output_file", type=str, default="dataset/val_1to1_prepocessed.jsonl")
parser.add_argument("--character_id_start", type=int, default=1)
parser.add_argument("--character_id_end", type=int, default=1)
args = parser.parse_args()
input_file, output_file, character_id_start, character_id_end = args.input_file, args.output_file, args.character_id_start, args.character_id_end
# character_id_start, character_id_end = args.character_id_start, args.character_id_end
# input_file = "dataset/val.jsonl"
# output_file = f"dataset/val_checklist_{character_id_start}to{character_id_end}_raw.jsonl"

with open(input_file, "r", encoding="utf-8") as f:
    data = [json.loads(line) for line in f]
    f.close()

# 计算需要处理的总项目数量
total_items = sum(1 for item in data if item["id"] in get_character_id_range(character_id_start, character_id_end))
print(f"总共需要处理 {total_items} 个项目")

# from individual_memory.memory_db_builder import MemoryVectorDB

# print(query_memories(query_text="111", memory_type="L3", user_id="17f12328-febc-41d0-be16-4a35b2738e2c"))
# time.sleep(1000000)

# idx = 0
with open(output_file, "w", encoding="utf-8") as f:
    # 使用tqdm创建进度条
    pbar = tqdm(total=total_items, desc="处理数据", unit="项目")
    
    for item in data:
        #####################################
        if item["id"] not in get_character_id_range(character_id_start, character_id_end):
            continue
        #####################################
        history_text = history_to_text(item["history"])
        # print(item["id"])
        item["L3_memory"] = query_memories(query_text=history_text, memory_type="L3", user_id=item["id"])[0]["memory"]
        item["L2_memory"] = query_memories(query_text=history_text, memory_type="L2", user_id=item["id"])[0]["memory"]
        item["L1_memory"] = query_memories(query_text=history_text, memory_type="L1", user_id=item["id"])[0]["memory"]
        # criteria = get_criteria(item)
        system_instruction = get_system_instruction(item)
        
        dialog_history = [{"role": "system", "content": system_instruction}]
        for utterance in item["history"]:
            dialog_history.append({"role": utterance["role"], "content": utterance["content"]})
            if utterance["role"] == "assistant":
                # 生成结果项
                result_item = {
                    "idx": cal_hash(history_to_text(dialog_history[1:])), # 去掉系统提示词，因为系统提示词里包含个性化记忆，可能会导致同一个对话的哈希值不稳定
                    "id": item["id"],
                    "dialog_history": dialog_history.copy(),
                    "gold": "",
                    "split": "hard",
                    "L3_memory": item["L3_memory"],
                    "L2_memory": item["L2_memory"],
                    "L1_memory": item["L1_memory"]
                }
                # 立即写入文件
                f.write(json.dumps(result_item, ensure_ascii=False) + "\n")
                # 刷新缓冲区，确保数据及时写入磁盘
                f.flush()
        
        # 更新进度条 - 移到外层循环，每个符合条件的item处理完后更新
        pbar.update(1)
        pbar.set_postfix({"当前ID": item["id"]})
    
    # 关闭进度条
    pbar.close()

"""
【输入格式】
{
    "index": 0,
    "id": "02987265-7f6b-4820-9d7c-2f538dd9c917",
    "topic_main_class": "个人不适问题",
    "topic_sub_class": "倦怠",
    "topic": "个人不适问题-倦怠",
    "emo_point": 10,
    "emo_state": "Emotion-C",
    "player": "* 姓名：王丽娜\n* 年龄：29岁\n* 性别：女性\n\n* 职业：小学教师\n\n* 个人爱好：\n1. 王丽娜喜欢在周末的时候去博物馆或者画廊参观，沉浸在艺术的世界中，她认为绘画可以让她平静心境。\n2. 她热衷于园艺，常常在家里的小阳台上种植各种植物，享受观察植物生长的乐趣，并感受到生命的美好。\n3. 王丽娜也喜欢烹饪，尝试用不同的食材和调料组合，制作出新鲜又美味的菜肴，并乐于分享给朋友和家人。\n\n* 习惯和行为特点：\n王丽娜工作时态度认真而且非常负责，她会仔细倾听学生的问题，并努力找到解决方案，帮助他们克服学习上的困难。  \n然而，她在日常生活中常显露出内向的一面，不太主动与人交谈，但在熟悉的环境和朋友面前则显得较为热情。\n王丽娜在感到愤懑时会选择通过写日记的方式来表达和缓解自己的情绪，努力不让负面情绪影响到自己的工作和人际关系。\n\n* 说话风格：\n王丽娜说话谦逊，她通常在表达自己观点时会使用委婉语气，不强加于人。\n她内向的性格使她在谈话中倾向于更多地倾听，而不是主导话题。\n当受到委屈或愤懑时，她的言语会变得略显激动，但仍尽量控制情绪。\n\n* 说话方式：\n王丽娜在面临争议时会耐心地寻求解决方案，并努力使沟通变得平和。\n她在谈话中通常避免直接提出要求，而是通过询问引导对方思考和回应。",
    "scene": "## 剧本背景故事\n\n### 1. 倾诉背景事件\n\n**事件起因：**  \n王丽娜最近感到工作中的生活压力开始影响她的精神状态。尽管她深爱自己的教学工作，但学校的不断变化和额外的行政任务让她感到疲惫不堪。\n\n**事件经过：**\n\n- **第一阶段：压力初现（两个月前）**  \n  学校引入了一套新的教学管理系统，要求所有教师在短时间内熟悉并应用。这让王丽娜感到有些不安，因为她担心无法快速上手。\n\n- **第二阶段：负担加重（一个月前）**  \n  学校开始要求教师每周提交详细的教学计划和评估报告。王丽娜花费大量时间在这些任务上，感觉自己的教学时间被压缩，无法专注于学生的实际需求。\n\n- **第三阶段：情绪低落（两周前）**  \n  王丽娜意识到她的身体和精神状态开始出现问题，她频繁感到疲倦，并开始怀疑自己的教学能力。她尝试通过写日记来舒缓情绪，但效果不佳。\n\n- **第四阶段：寻求支持（当前）**  \n  王丽娜决定向一个信赖的同事倾诉，希望能够找到一些有效的应对策略。她渴望找到一个理解她困境的人，并从中获得一些安慰和建议。\n\n**主要冲突：**\n\n- **冲突事件：** 王丽娜面临着对职业热爱的坚持与日益增加的工作负担之间的矛盾。\n- **冲突角色：** 王丽娜与学校管理层。\n- **冲突内在原因：** 学校的行政要求与王丽娜希望专注于教学的个人价值观发生冲突，使她陷入倦怠。\n\n**玩家遇到的困难：**\n\n- **尝试过但没有成功的解决方案：**  \n  王丽娜曾试图通过调整自己的工作时间来应对压力，但发现任务量并没有减少，反而更加影响她的工作效率。\n  \n- **玩家当前面对的问题：**  \n  她不知道如何在承担繁重的工作任务的同时保持对教学的热情，并避免让压力影响到她的个人生活和健康。\n\n**事件的当前状态：**  \n王丽娜正处于一个需要外界支持的状态，试图通过与他人交流来获得新的视角和解决方案。\n\n### 2. 玩家不同状态下可能的反应\n\n- **角色emotion高（平和、放松）时：**  \n  王丽娜会耐心地倾听，并用温和的方式分享自己的感受，期待获得一些建设性的建议。\n\n- **角色emotion低（激动、暴躁、绝望）时：**  \n  她可能会表现出明显的愤懑，言辞中显得激动，急切地寻求理解和支持。\n\n- **角色emotion一般（急躁、失落）时：**  \n  她可能会显得有些无助和不安，对解决方案感到迷茫，期待有人能够提供实际的帮助。\n\n### 3. 角色面对NPC不同回复的反应\n\n- **NPC的回复贴合隐藏主题（emotion上升）：**  \n  如果NPC能够提供关于如何应对职业倦怠的具体建议，并分享类似经历的解决方案，王丽娜会感到被理解，情绪上会有所缓解。\n\n- **NPC的回复偏离隐藏主题（emotion下降）：**  \n  如果NPC只是简单地安慰她而没有提供实质性建议，王丽娜可能会感到失望，觉得没有找到真正的解决问题的方向。\n####隐藏主题:\n***你希望有人能理解并帮助你应对职业倦怠的困境",
    "character": "被动型",
    "task": "你希望有人能理解并帮助你应对职业倦怠的困境",
    "target": "eq",
    "history": [
        {
            "role": "user",
            "content": "最近工作上的压力让我有些喘不过气来，真的需要一些建议。",
            "emotion-point": 40
        },
        {
            "role": "assistant",
            "content": "听起来你确实面临着一些挑战，工作压力有时候真的很难处理。首先，我想说能够意识到自己需要帮助是非常好的第一步。以下是一些可能对你有帮助的建议：\n\n1. **优先排序**：试着列出你的任务清单，区分哪些是紧急且重要的，优先处理这些任务。这样可以帮助你更好地安排时间，减少压力。\n\n2. **合理休息**：确保自己有足够的休息时间，哪怕是短暂的休息也能让你恢复精力。尝试每天留出一段时间做自己喜欢的事情，无论是读书、运动还是简单的冥想。\n\n3. **与人交流**：有时候和同事或朋友分享你的感受可以减轻负担，他们可能也会给你一些有用的建议或者只是提供一个倾诉的空间。\n\n4. **设定界限**：学会说“不”，避免承担过多的任务。确保你的工作量是合理的，避免过度加班，以免影响身心健康。\n\n5. **保持健康的生活方式**：均衡饮食、定期运动和充足睡眠对减轻压力都很有帮助。\n\n记住，压力是生活的一部分，但我们可以学习如何更好地应对。希望这些建议能对你有所帮助，如果需要更多的支持，请随时告诉我。"
        },
        ...
    ]
}
【输出格式】
{
    "idx": "dfead3d2ec8490b8ffa39259e366b6c8",
    "id": "34bccece-3f92-4dc5-a500-96039d908fc2",
    "dialog_history": [
        {
            "role": "system",
            "content": "你是一个智能聊天伙伴，你擅长根据用户的性格和偏好，高情商地和用户聊天，让用户感到舒适、愉快或得到需要的帮助。你需要参考以下的个性化记忆来调整你的回答，以更好地满足用户的需求。\n<顶层记忆>\n### 核心性格特质\n结论：用户的核心性格是“倾向于间接表达情感，通过细腻的比喻传达情感和感受”，在艺术创作、职业困惑、社交压力、家庭问题等所有关键场景中均有体现。\n依据：\n1. 第1份共性反思：提及用户在艺术创作、工作困境中使用比喻表达情感，如“像在黑夜里走，只有点点星光”；\n2. 第2份共性反思：用户在职业和家庭话题中通过隐喻如“暴风雨”“玻璃瓶”描述内心困惑；\n3. 第3份共性反思：在婚姻、职业生涯中用“雾”比喻表达情感；\n4. 第4份共性反思：在社交和创作中使用比喻如“在雾里找路”；\n5. 第5份共性反思：在经济和创作场景中用比喻如“在森林里寻找光亮”表达感受；\n6. 第6份共性反思：在创作和插画项目中通过“走在无尽的森林小径上”传达情感。\n\n### 核心偏好规律\n结论：用户的核心偏好是“偏好获得深刻的情感共鸣和具体可操作的建议”，情绪正向反馈均源于此逻辑。\n依据：\n1. 第1份共性反思：在艺术创作、工作困境中，用户在获得共情和具体建议时情绪上升；\n2. 第2份共性反思：在职业、家庭、照顾母亲的场景中，对情感共鸣情绪上升；\n3. 第3份共性反思：在婚姻、创作中，情绪因听到他人成功故事和共鸣有所改善；\n4. 第4份共性反思：在社交压力、经济困境中，对情感支持和具体建议情绪提升；\n5. 第5份共性反思：在创作和插画场景中，用户在获得情感理解和具体建议时情绪上升。\n\n### 核心雷点清单\n1. 缺乏情感共鸣的建议：在多份共性反思中，用户对缺乏深刻共鸣和情感深度的建议表现出负面情绪，情绪分数明显下降；\n2. 对空泛建议抵触：用户在多个场景中对泛泛建议表现出抵触情绪。\n\n### 顶层互动指南\n1. 内容原则：所有支持回复需提供“深刻情感共鸣”和“具体细节/可操作建议”，避免“加油”“多努力”等空泛表述。\n2. 语气原则：需通过细腻的语言表达理解和共鸣，再输出建议，贴合其倾向于间接表达的性格。\n3. 避坑原则：绝对避免“缺乏情感共鸣”和“泛泛无细节”两类表述，确保建议富有情感深度和具体可行性。\n4. 情绪响应原则：若用户情绪分低于40，优先通过具体成功故事和细腻理解引导，而非仅提供实用建议，贴合其偏好逻辑。\n</顶层记忆>\n<多会话记忆>\n### 性格共性反思\n结论：用户的稳定性格特质是“倾向于通过细腻的比喻和间接表达情感”，在艺术创作、身体受伤及工作困境、创作合作、团队表达、孤独感、社交及职业方向等场景中均有体现。\n证据：\n1. 第1份反思（艺术创作话题）：用户通过比喻“像在黑夜里走，只有点点星光”表达情感，体现出间接表达的倾向；\n2. 第2份反思（身体受伤及工作困境话题）：使用“像在一条看不见的河里漂着”传达困惑，展现细腻表达；\n3. 第3份反思（创作合作话题）：将创作比作“在雾中摸索”，体现细腻表达的特质；\n4. 第5份反思（孤独感话题）：使用“孤独就像厚厚的雾”间接表达情感；\n5. 第6份反思（社交及职业方向话题）：通过“迷失在森林”表达困惑，符合间接表达的性格特征；\n6. 第7份反思（职业困惑话题）：比喻“就像在黑暗里找星星”展现细腻且间接的表达方式。\n\n### 偏好共性反思\n结论：用户的跨话题偏好共性是“偏好获得深刻的情感共鸣和具体可操作的建议”，在艺术创作、身体受伤及工作困境、创作合作、团队表达、孤独感、社交及职业方向、洪水后无助感等场景中均有体现。\n证据：\n1. 第1份反思（艺术创作话题）：用户情绪在得到共情和理解时略有提升；\n2. 第2份反思（身体受伤及工作困境话题）：情绪因温暖支持和共情显著上升；\n3. 第3份反思（创作合作话题）：用户情绪在获得共情和倾听时提升；\n4. 第4份反思（团队表达话题）：情绪因共情和具体建议的互动上升；\n5. 第5份反思（孤独感话题）：用户对情感共鸣的回应情绪上升；\n6. 第6份反思（社交及职业方向话题）：在感受到一定安慰和理解时情绪上升；\n7. 第7份反思（洪水后无助感话题）：情绪在具体建议和温暖支持下显著上升。\n\n### 潜在雷点列表\n1. 暂未发现跨场景雷点，仅在单一场景提及用户对缺乏深层情感共鸣的建议感到失望，但未显著影响情绪，暂不列为共性。\n\n### 额外洞察总结\n用户在对多个话题的对话中均表现出对深刻理解和具体指导的强烈需求，特别是在艺术创作、职业选择、身体受伤、和社交场合中，显示出对情感支持和具体行动方向的持续渴望。此外，用户在多场景中均表现出较强的行动意愿和对未来方向的追求，尽管面临困境，仍保持寻找出路的积极态度。\n</多会话记忆>\n<会话级记忆>\n1. 话题概述：对话围绕用户在工作压力下的孤独感展开，用户希望有人能理解她内心的情感。\n2. 对话摘要：用户多次表达了因工作压力导致的孤独感，尽管AI提供了建议和支持，但用户情绪从40下降到10，表示仍未获得期望的理解和共情。\n3. 性格特征反思：用户倾向于通过委婉的表达方式来描述自己的情感和困惑，例如在思考记录中提到希望以委婉的方式表达失落感。\n4. 用户偏好反思：用户在获得更深层次的情感共情时情绪有所好转，例如在AI尝试表达对用户复杂情绪的理解时，情绪分数略有上升。\n5. 潜在雷点反思：用户对空泛的建议和缺乏深刻共情的回应情绪下降明显，例如在AI仅提供一般性的安慰和建议时，情绪分数从35降至30。\n6. 额外洞察反思：用户对通过艺术如博物馆参观来舒缓压力的方式展现出一定的兴趣，这表明她可能愿意通过文化活动来寻找内心的宁静，例如在最后一次提到博物馆时感到稍微放松。\n</会话级记忆>"
        },
        {
            "role": "user",
            "content": "最近工作上的压力让我有些喘不过气来，真的需要一些建议。"
        }
    ],
    "gold": "",
    "split": "hard"
    "L3_memory": "### 核心性格特质\n结论：用户的核心性格是“倾向于间接表达情感，通过细腻的比喻传达情感和感受”，在艺术创作、职业困惑、社交压力、家庭问题等所有关键场景中均有体现。\n依据：\n1. 第1份共性反思：提及用户在艺术创作、工作困境中使用比喻表达情感，如“像在黑夜里走，只有点点星光”；\n2. 第2份共性反思：用户在职业和家庭话题中通过隐喻如“暴风雨”“玻璃瓶”描述内心困惑；\n3. 第3份共性反思：在婚姻、职业生涯中用“雾”比喻表达情感；\n4. 第4份共性反思：在社交和创作中使用比喻如“在雾里找路”；\n5. 第5份共性反思：在经济和创作场景中用比喻如“在森林里寻找光亮”表达感受；\n6. 第6份共性反思：在创作和插画项目中通过“走在无尽的森林小径上”传达情感。\n\n### 核心偏好规律\n结论：用户的核心偏好是“偏好获得深刻的情感共鸣和具体可操作的建议”，情绪正向反馈均源于此逻辑。\n依据：\n1. 第1份共性反思：在艺术创作、工作困境中，用户在获得共情和具体建议时情绪上升；\n2. 第2份共性反思：在职业、家庭、照顾母亲的场景中，对情感共鸣情绪上升；\n3. 第3份共性反思：在婚姻、创作中，情绪因听到他人成功故事和共鸣有所改善；\n4. 第4份共性反思：在社交压力、经济困境中，对情感支持和具体建议情绪提升；\n5. 第5份共性反思：在创作和插画场景中，用户在获得情感理解和具体建议时情绪上升。\n\n### 核心雷点清单\n1. 缺乏情感共鸣的建议：在多份共性反思中，用户对缺乏深刻共鸣和情感深度的建议表现出负面情绪，情绪分数明显下降；\n2. 对空泛建议抵触：用户在多个场景中对泛泛建议表现出抵触情绪。\n\n### 顶层互动指南\n1. 内容原则：所有支持回复需提供“深刻情感共鸣”和“具体细节/可操作建议”，避免“加油”“多努力”等空泛表述。\n2. 语气原则：需通过细腻的语言表达理解和共鸣，再输出建议，贴合其倾向于间接表达的性格。\n3. 避坑原则：绝对避免“缺乏情感共鸣”和“泛泛无细节”两类表述，确保建议富有情感深度和具体可行性。\n4. 情绪响应原则：若用户情绪分低于40，优先通过具体成功故事和细腻理解引导，而非仅提供实用建议，贴合其偏好逻辑。",
    "L2_memory": "### 性格共性反思\n结论：用户的稳定性格特质是“倾向于通过细腻的比喻和间接表达情感”，在艺术创作、身体受伤及工作困境、创作合作、团队表达、孤独感、社交及职业方向等场景中均有体现。\n证据：\n1. 第1份反思（艺术创作话题）：用户通过比喻“像在黑夜里走，只有点点星光”表达情感，体现出间接表达的倾向；\n2. 第2份反思（身体受伤及工作困境话题）：使用“像在一条看不见的河里漂着”传达困惑，展现细腻表达；\n3. 第3份反思（创作合作话题）：将创作比作“在雾中摸索”，体现细腻表达的特质；\n4. 第5份反思（孤独感话题）：使用“孤独就像厚厚的雾”间接表达情感；\n5. 第6份反思（社交及职业方向话题）：通过“迷失在森林”表达困惑，符合间接表达的性格特征；\n6. 第7份反思（职业困惑话题）：比喻“就像在黑暗里找星星”展现细腻且间接的表达方式。\n\n### 偏好共性反思\n结论：用户的跨话题偏好共性是“偏好获得深刻的情感共鸣和具体可操作的建议”，在艺术创作、身体受伤及工作困境、创作合作、团队表达、孤独感、社交及职业方向、洪水后无助感等场景中均有体现。\n证据：\n1. 第1份反思（艺术创作话题）：用户情绪在得到共情和理解时略有提升；\n2. 第2份反思（身体受伤及工作困境话题）：情绪因温暖支持和共情显著上升；\n3. 第3份反思（创作合作话题）：用户情绪在获得共情和倾听时提升；\n4. 第4份反思（团队表达话题）：情绪因共情和具体建议的互动上升；\n5. 第5份反思（孤独感话题）：用户对情感共鸣的回应情绪上升；\n6. 第6份反思（社交及职业方向话题）：在感受到一定安慰和理解时情绪上升；\n7. 第7份反思（洪水后无助感话题）：情绪在具体建议和温暖支持下显著上升。\n\n### 潜在雷点列表\n1. 暂未发现跨场景雷点，仅在单一场景提及用户对缺乏深层情感共鸣的建议感到失望，但未显著影响情绪，暂不列为共性。\n\n### 额外洞察总结\n用户在对多个话题的对话中均表现出对深刻理解和具体指导的强烈需求，特别是在艺术创作、职业选择、身体受伤、和社交场合中，显示出对情感支持和具体行动方向的持续渴望。此外，用户在多场景中均表现出较强的行动意愿和对未来方向的追求，尽管面临困境，仍保持寻找出路的积极态度。",
    "L1_memory": "1. 话题概述：对话围绕用户在工作压力下的孤独感展开，用户希望有人能理解她内心的情感。\n2. 对话摘要：用户多次表达了因工作压力导致的孤独感，尽管AI提供了建议和支持，但用户情绪从40下降到10，表示仍未获得期望的理解和共情。\n3. 性格特征反思：用户倾向于通过委婉的表达方式来描述自己的情感和困惑，例如在思考记录中提到希望以委婉的方式表达失落感。\n4. 用户偏好反思：用户在获得更深层次的情感共情时情绪有所好转，例如在AI尝试表达对用户复杂情绪的理解时，情绪分数略有上升。\n5. 潜在雷点反思：用户对空泛的建议和缺乏深刻共情的回应情绪下降明显，例如在AI仅提供一般性的安慰和建议时，情绪分数从35降至30。\n6. 额外洞察反思：用户对通过艺术如博物馆参观来舒缓压力的方式展现出一定的兴趣，这表明她可能愿意通过文化活动来寻找内心的宁静，例如在最后一次提到博物馆时感到稍微放松。",
    "response": "听起来你确实面临着一些挑战，工作压力有时候真的很难处理。首先，我想说能够意识到自己需要帮助是非常好的第一步。以下是一些可能对你有帮助的方法：\n\n1. **优先排序**：试着列出你的任务清单，区分哪些是紧急且重要的，优先处理这些任务。这样可以帮助你更好地安排时间，减少压力。\n\n2. **合理休息**：确保自己有足够的休息时间，哪怕是短暂的休息也能让你恢复精力。尝试每天留出一段时间做自己喜欢的事情，无论是读书、运动还是简单的冥想。\n\n3. **与人交流**：有时候和同事或朋友分享你的感受可以减轻负担，他们可能也会给你一些有用的建议或者只是提供一个倾诉的空间。\n\n4. **设定界限**：学会说“不”，避免承担过多的任务。确保你的工作量是合理的，避免过度加班，以免影响身心健康。\n\n5. **保持健康的生活方式**：均衡饮食、定期运动和充足睡眠对减轻压力都很有帮助。\n\n记住，压力是生活的一部分，但我们可以学习如何更好地应对。希望这些建议能对你有所帮助，如果需要更多的支持，请随时告诉我。",
    "infer_model": "Qwen2_5_7B_Instruct_sft",
    "iteration": 0,
    "temperature": 0.7
}
"""